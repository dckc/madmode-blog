<!doctype html>
<html>
  <head>
    <title>hAudio from XSPF</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/styles.css">
    <script src="/script.js" defer></script>
  </head>
  <body>
    <h1>hAudio from XSPF</h1>
    <p>
      This is the demo page for the official <span>Chrome DevTools</span> tutorial on setting up and using Workspaces.
    </p>
    <p>
      See <a href="https://developers.google.com/web/tools/chrome-devtools/workspaces">Save Changes To Disk With Workspaces</a>
      for instructions.
    </p>

<div id="dropZone" style="width: 100px; height: 100px; background-color: red"></div>

<script>
var dropZone = document.getElementById('dropZone');

// Optional.   Show the copy icon when dragging over.  Seems to only work for chrome.
dropZone.addEventListener('dragover', function(e) {
    e.stopPropagation();
    e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
});

// Get file data on drop
dropZone.addEventListener('drop', function(e) {
    e.stopPropagation();
    e.preventDefault();
    var files = e.dataTransfer.files; // Array of all files

    for (var i=0, file; file=files[i]; i++) {
        if (file.type.match(/xspf/)) {
            var reader = new FileReader();

            reader.onload = function(e2) {
                // finished reading file data.
                var xspf = document.createElement('pre');
                xspf.textContent= e2.target.result;
                document.body.appendChild(xspf);
            }

            reader.readAsText(file); // start reading the file data.
        }
    }
});
</script>

    <hr/>
    acks:
    <ul>
    <li><a href="https://stackoverflow.com/questions/10261989/html5-javascript-drag-and-drop-file-from-external-window-windows-explorer"
    >&lt;div id=&quot;dropZone&quot; style=&quot;width: 100px; height: 100px; background-color: red&quot;&gt;&lt;/div&gt;
    </a></li>
    <li><a href="http://microformats.org/wiki/haudio"
    >haudio</a></li>
    <li>
    <a href="https://developers.google.com/web/tools/chrome-devtools/workspaces"
    >workspaces</a></li>
<li>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">MDN on drag-n-drop</a>
  </li>
  </body>
</html>
